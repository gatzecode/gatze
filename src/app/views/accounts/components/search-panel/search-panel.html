<div class="search-panel">
  <div class="panel-header">
    <h2 class="panel-title">
      <mat-icon>search</mat-icon>
      Filtros de Búsqueda
    </h2>
  </div>

  <div class="panel-content">
    <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
      <div class="form-fields">
        <mat-form-field appearance="outline">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="firstName" placeholder="Nombre">
          <mat-icon matPrefix>person</mat-icon>
          @if (searchForm.get('firstName')?.invalid && searchForm.get('firstName')?.touched) {
            <mat-error>{{ getErrorMessage('firstName') }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Apellido Paterno</mat-label>
          <input matInput formControlName="lastName" placeholder="Apellido">
          <mat-icon matPrefix>person</mat-icon>
          @if (searchForm.get('lastName')?.invalid && searchForm.get('lastName')?.touched) {
            <mat-error>{{ getErrorMessage('lastName') }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Apellido Materno</mat-label>
          <input matInput formControlName="secondLastName" placeholder="Apellido">
          <mat-icon matPrefix>person</mat-icon>
          @if (searchForm.get('secondLastName')?.invalid && searchForm.get('secondLastName')?.touched) {
            <mat-error>{{ getErrorMessage('secondLastName') }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Número de Cuenta</mat-label>
          <input matInput formControlName="accountNumber" placeholder="Cuenta">
          <mat-icon matPrefix>account_balance_wallet</mat-icon>
          @if (searchForm.get('accountNumber')?.invalid && searchForm.get('accountNumber')?.touched) {
            <mat-error>{{ getErrorMessage('accountNumber') }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Número de Tarjeta</mat-label>
          <input matInput formControlName="cardNumber" placeholder="16 dígitos" maxlength="16">
          <mat-icon matPrefix>credit_card</mat-icon>
          @if (searchForm.get('cardNumber')?.invalid && searchForm.get('cardNumber')?.touched) {
            <mat-error>{{ getErrorMessage('cardNumber') }}</mat-error>
          }
        </mat-form-field>

        <mat-checkbox formControlName="additionalsOnly" color="primary" class="full-width-checkbox">
          Solo Tarjetas Adicionales
        </mat-checkbox>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          class="full-width"
          [disabled]="searching()">
          @if (searching()) {
            <mat-spinner diameter="20" class="inline-block mr-2"></mat-spinner>
          } @else {
            <mat-icon>search</mat-icon>
          }
          Buscar
        </button>
        <button
          mat-stroked-button
          type="button"
          class="full-width"
          (click)="onClear()"
          [disabled]="searching()">
          <mat-icon>clear</mat-icon>
          Limpiar
        </button>
      </div>
    </form>
  </div>
</div>
