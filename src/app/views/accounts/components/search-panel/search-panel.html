<div class="search-panel">
  <div class="panel-header">
    <h2 class="panel-title">
      <div class="w-10 h-10 rounded-lg bg-primary/10 dark:bg-primary/20 flex items-center justify-center">
        <mat-icon class="text-primary text-xl!">search</mat-icon>
      </div>
      <span class="text-text">Filtros de Búsqueda</span>
    </h2>
  </div>

  <div class="panel-content">
    <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
      <div class="form-fields">
        <div class="field-group">
          <label class="field-label">Nombre Completo</label>
          <mat-form-field appearance="outline">
            <input matInput formControlName="fullName" placeholder="Nombre y apellidos">
            <mat-icon matPrefix>person</mat-icon>
            @if (searchForm.get('fullName')?.invalid && searchForm.get('fullName')?.touched) {
              <mat-error>{{ getErrorMessage('fullName') }}</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="field-group">
          <label class="field-label">Número de Cuenta</label>
          <mat-form-field appearance="outline">
            <input matInput formControlName="accountNumber" placeholder="Cuenta">
            <mat-icon matPrefix>account_balance_wallet</mat-icon>
            @if (searchForm.get('accountNumber')?.invalid && searchForm.get('accountNumber')?.touched) {
              <mat-error>{{ getErrorMessage('accountNumber') }}</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="field-group">
          <label class="field-label">Número de Tarjeta</label>
          <mat-form-field appearance="outline">
            <input matInput formControlName="cardNumber" placeholder="16 dígitos" maxlength="16">
            <mat-icon matPrefix>credit_card</mat-icon>
            @if (searchForm.get('cardNumber')?.invalid && searchForm.get('cardNumber')?.touched) {
              <mat-error>{{ getErrorMessage('cardNumber') }}</mat-error>
            }
          </mat-form-field>
        </div>

        <mat-checkbox formControlName="additionalsOnly" color="primary" class="full-width-checkbox">
          Solo Tarjetas Adicionales
        </mat-checkbox>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button
          mat-button
          color="primary"
          type="submit"
          class="full-width"
          [disabled]="searching()">
          @if (searching()) {
            <mat-spinner diameter="20" class="inline-block mr-2"></mat-spinner>
          } @else {
            <mat-icon>search</mat-icon>
          }
          Buscar
        </button>
        <button
          mat-stroked-button
          type="button"
          class="full-width"
          (click)="onClear()"
          [disabled]="searching()">
          <mat-icon>clear</mat-icon>
          Limpiar
        </button>
      </div>
    </form>
  </div>
</div>
